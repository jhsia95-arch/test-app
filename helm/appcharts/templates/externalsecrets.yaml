apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: fastapi-db #
  namespace: default  
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secretsmanager
    kind: SecretStore
  target:
    name: fastapi-db-secret
    template:
      engineVersion: v2
      data:
        DATABASE_URL: >- #to update with dbname etc
          postgresql://dbadmin:{{ .password }}@tech-assessment-db.ct4kusau6ztk.ap-southeast-1.rds.amazonaws.com:5432/postgresdb
  dataFrom:
    - extract:
        key: arn:aws:secretsmanager:ap-southeast-1:995597568618:secret:rds!db-72429691-666c-4054-a6ee-dd46b9191fd8-25kB7j #to update with secrets arn after terraform provisioned the db